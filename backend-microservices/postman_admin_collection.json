{
  "info": {
    "name": "PetPro Admin Dashboard API",
    "description": "Admin panel API collection using httpOnly cookies for authentication",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "admin_gateway_url",
      "value": "http://localhost:4000/api/v1",
      "type": "string"
    },
    {
      "key": "admin_service_url", 
      "value": "http://localhost:3005/api/v1",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üîê Authentication",
      "item": [
        {
          "name": "Admin Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Cookies are automatically managed by browser/Postman",
                  "pm.test('Login successful', function() {",
                  "    pm.response.to.have.status(200);",
                  "    pm.expect(pm.response.json()).to.have.property('user');",
                  "    pm.expect(pm.response.json()).to.have.property('message');",
                  "});",
                  "",
                  "// Check if cookies are set",
                  "pm.test('Cookies are set', function() {",
                  "    pm.expect(pm.cookies.has('admin_access_token')).to.be.true;",
                  "    pm.expect(pm.cookies.has('admin_refresh_token')).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@petpro.com\",\n  \"password\": \"AdminPassword123!\"\n}"
            },
            "url": {
              "raw": "{{admin_gateway_url}}/auth/login",
              "host": ["{{admin_gateway_url}}"],
              "path": ["auth", "login"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"admin@petpro.com\",\n  \"password\": \"AdminPassword123!\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Set-Cookie",
                  "value": "admin_access_token=eyJhbGciOiJIUzI1NiIs...; HttpOnly; Secure; SameSite=Strict; Max-Age=900"
                },
                {
                  "key": "Set-Cookie", 
                  "value": "admin_refresh_token=eyJhbGciOiJIUzI1NiIs...; HttpOnly; Secure; SameSite=Strict; Path=/auth/refresh; Max-Age=604800"
                }
              ],
              "body": "{\n  \"user\": {\n    \"id\": \"admin_123e4567-e89b-12d3-a456-426614174000\",\n    \"email\": \"admin@petpro.com\",\n    \"firstName\": \"Admin\",\n    \"lastName\": \"PetPro\",\n    \"role\": \"admin\",\n    \"isActive\": true\n  },\n  \"message\": \"Login successful\"\n}"
            }
          ]
        },
        {
          "name": "Get Admin Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/auth/profile",
              "host": ["{{admin_gateway_url}}"],
              "path": ["auth", "profile"]
            }
          }
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{admin_gateway_url}}/auth/refresh",
              "host": ["{{admin_gateway_url}}"],
              "path": ["auth", "refresh"]
            }
          }
        },
        {
          "name": "Admin Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Logout successful', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Cookies should be cleared",
                  "pm.test('Cookies cleared', function() {",
                  "    pm.expect(pm.cookies.has('admin_access_token')).to.be.false;",
                  "    pm.expect(pm.cookies.has('admin_refresh_token')).to.be.false;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/auth/logout",
              "host": ["{{admin_gateway_url}}"],
              "path": ["auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "üë• User Management",
      "item": [
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/users?page=1&limit=20&role=customer",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "role",
                  "value": "customer"
                }
              ]
            }
          }
        },
        {
          "name": "Search Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/users/search?q=john&page=1&limit=10",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "users", "search"],
              "query": [
                {
                  "key": "q",
                  "value": "john"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/users/{{user_id}}",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "users", "{{user_id}}"]
            }
          }
        },
        {
          "name": "Update User Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isActive\": false,\n  \"reason\": \"Account suspended for policy violation\"\n}"
            },
            "url": {
              "raw": "{{admin_gateway_url}}/admin/users/{{user_id}}/status",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "users", "{{user_id}}", "status"]
            }
          }
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/users/{{user_id}}",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "users", "{{user_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "üè™ Vendor Management",
      "item": [
        {
          "name": "Get All Vendors",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/vendors?page=1&limit=20&status=active",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "vendors"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "active"
                }
              ]
            }
          }
        },
        {
          "name": "Approve Vendor",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"approved\",\n  \"notes\": \"All documents verified\"\n}"
            },
            "url": {
              "raw": "{{admin_gateway_url}}/admin/vendors/{{vendor_id}}/approve",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "vendors", "{{vendor_id}}", "approve"]
            }
          }
        },
        {
          "name": "Reject Vendor",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"rejected\",\n  \"reason\": \"Incomplete documentation\",\n  \"notes\": \"Business license not provided\"\n}"
            },
            "url": {
              "raw": "{{admin_gateway_url}}/admin/vendors/{{vendor_id}}/reject",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "vendors", "{{vendor_id}}", "reject"]
            }
          }
        }
      ]
    },
    {
      "name": "üìä Dashboard & Analytics",
      "item": [
        {
          "name": "Dashboard Overview",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/dashboard/overview",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "dashboard", "overview"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{admin_gateway_url}}/admin/dashboard/overview",
                  "host": ["{{admin_gateway_url}}"],
                  "path": ["admin", "dashboard", "overview"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"totalUsers\": 1250,\n  \"totalVendors\": 85,\n  \"totalBookings\": 3420,\n  \"totalRevenue\": 125000.50,\n  \"activeUsers\": 1180,\n  \"pendingVendorApprovals\": 12,\n  \"completedBookingsToday\": 45,\n  \"revenueToday\": 2850.75\n}"
            }
          ]
        },
        {
          "name": "User Analytics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/analytics/users?period=month",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "analytics", "users"],
              "query": [
                {
                  "key": "period",
                  "value": "month"
                }
              ]
            }
          }
        },
        {
          "name": "Booking Analytics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/analytics/bookings?period=week&status=completed",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "analytics", "bookings"],
              "query": [
                {
                  "key": "period",
                  "value": "week"
                },
                {
                  "key": "status",
                  "value": "completed"
                }
              ]
            }
          }
        },
        {
          "name": "Revenue Analytics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/analytics/revenue?period=month&breakdown=daily",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "analytics", "revenue"],
              "query": [
                {
                  "key": "period",
                  "value": "month"
                },
                {
                  "key": "breakdown",
                  "value": "daily"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üì¶ Inventory Management",
      "item": [
        {
          "name": "Get All Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/inventory/products?page=1&limit=50",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "inventory", "products"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            }
          }
        },
        {
          "name": "Create Product Category",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Dog Food\",\n  \"description\": \"All types of dog food and treats\",\n  \"parentId\": null,\n  \"isActive\": true,\n  \"sortOrder\": 1\n}"
            },
            "url": {
              "raw": "{{admin_gateway_url}}/admin/inventory/categories",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "inventory", "categories"]
            }
          }
        },
        {
          "name": "Create Product",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Premium Dog Food - Adult\",\n  \"description\": \"High-quality dry dog food for adult dogs\",\n  \"sku\": \"PDF-ADULT-001\",\n  \"categoryId\": \"{{category_id}}\",\n  \"price\": 45.99,\n  \"cost\": 28.50,\n  \"weight\": 10.0,\n  \"unit\": \"kg\",\n  \"minStock\": 20,\n  \"isActive\": true,\n  \"tags\": [\"premium\", \"adult\", \"dry-food\"]\n}"
            },
            "url": {
              "raw": "{{admin_gateway_url}}/admin/inventory/products",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "inventory", "products"]
            }
          }
        },
        {
          "name": "Update Stock",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quantity\": 100,\n  \"adjustmentType\": \"restock\",\n  \"reason\": \"New inventory received\",\n  \"notes\": \"Batch #12345 from supplier ABC\"\n}"
            },
            "url": {
              "raw": "{{admin_gateway_url}}/admin/inventory/products/{{product_id}}/stock",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "inventory", "products", "{{product_id}}", "stock"]
            }
          }
        },
        {
          "name": "Low Stock Alert",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/inventory/alerts/low-stock",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "inventory", "alerts", "low-stock"]
            }
          }
        }
      ]
    },
    {
      "name": "üìã System Management",
      "item": [
        {
          "name": "System Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/health",
              "host": ["{{admin_gateway_url}}"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "View System Logs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/system/logs?level=error&limit=100&page=1",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "system", "logs"],
              "query": [
                {
                  "key": "level",
                  "value": "error"
                },
                {
                  "key": "limit",
                  "value": "100"
                },
                {
                  "key": "page",
                  "value": "1"
                }
              ]
            }
          }
        },
        {
          "name": "System Configuration",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_gateway_url}}/admin/system/config",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "system", "config"]
            }
          }
        },
        {
          "name": "Update System Settings",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"maintenanceMode\": false,\n  \"maxBookingsPerDay\": 500,\n  \"bookingCancellationWindow\": 24,\n  \"emailNotifications\": true,\n  \"smsNotifications\": true\n}"
            },
            "url": {
              "raw": "{{admin_gateway_url}}/admin/system/settings",
              "host": ["{{admin_gateway_url}}"],
              "path": ["admin", "system", "settings"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Pre-request script for admin panel",
          "// Cookies are automatically managed by browser/Postman",
          "// No manual token management needed"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript", 
        "exec": [
          "// Global test script",
          "pm.test('Response time is less than 2000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(2000);",
          "});",
          "",
          "pm.test('Response is JSON', function () {",
          "    pm.response.to.have.header('Content-Type');",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});"
        ]
      }
    }
  ]
}